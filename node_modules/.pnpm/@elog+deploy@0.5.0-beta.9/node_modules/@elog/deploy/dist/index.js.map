{"version":3,"sources":["../src/platform/local.ts","../src/const.ts","../src/adapter/index.ts","../src/platform/confluence.ts","../src/client.ts","../src/index.ts"],"names":["path","out","FileNameEnum","FormatEnum"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,gBAAgB;AACvB,OAAOA,WAAU;AACjB,OAAO,YAAY;AACnB,SAAS,OAAAC,YAAW;AACpB,OAAO,QAAQ;;;ACOR,IAAK,eAAL,kBAAKC,kBAAL;AACL,EAAAA,cAAA,WAAQ;AACR,EAAAA,cAAA,aAAU;AAFA,SAAAA;AAAA,GAAA;AAIL,IAAK,aAAL,kBAAKC,gBAAL;AACL,EAAAA,YAAA,cAAW;AACX,EAAAA,YAAA,qBAAkB;AAClB,EAAAA,YAAA,UAAO;AACP,EAAAA,YAAA,UAAO;AAJG,SAAAA;AAAA,GAAA;AAOL,IAAM,eAAe,OAAO,OAAO,YAAY;AAE/C,IAAM,aAAa,OAAO,OAAO,UAAU;;;ACxBlD,SAAS,WAAW;AACpB,OAAO,UAAU;AACjB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AAOA,IAAM,gBAAN,MAAoB;AAAA,EAIzB,YAAY,QAAuB;AACjC,SAAK,SAAS;AACd,SAAK,MAAM,KAAK,YAAY;AAAA,EAC9B;AAAA;AAAA;AAAA;AAAA;AAAA,EAMQ,cAAc;AACpB,QAAI,KAAK,OAAO,WAAW;AACzB,UAAI,QAAQ,gBAAM,8JAA4B;AAC9C,UAAI;AAGF,cAAM,gBAAgB,KAAK,QAAQ,QAAQ,IAAI,GAAG,KAAK,OAAO,SAAS;AAEvE,cAAM,EAAE,OAAO,IAAI,UAAQ,aAAa;AACxC,eAAO;AAAA,MACT,SAAS,GAAP;AACA,YAAI,IAAI,EAAE,OAAO;AACjB,YAAI,IAAI,kGAAkB;AAC1B,gBAAQ,KAAK,CAAC;AAAA,MAChB;AAAA,IACF,OAAO;AACL,cAAQ,KAAK,OAAO,QAAQ;AAAA,QAC1B;AACE,iBAAO;AAAA,QACT;AACE,iBAAO;AAAA,QACT;AACE,iBAAO;AAAA,QACT;AACE,iBAAO;AAAA,QACT;AACE,cAAI,QAAQ,qEAAc,WAAW,SAAS,iEAAoB;AAClE,iBAAO;AAAA,MACX;AAAA,IACF;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKO,aAAa;AAClB,WAAO,KAAK;AAAA,EACd;AACF;;;AFvDA,IAAM,cAAN,MAAkB;AAAA,EAOhB,YAAY,QAAqB;AALjC,0BAA2B,CAAC;AAM1B,SAAK,SAAS;AACd,SAAK,gBAAgB,IAAI,cAAc,EAAE,QAAQ,OAAO,QAAQ,WAAW,OAAO,UAAU,CAAC;AAC7F,SAAK,UAAU,KAAK,cAAc,WAAW;AAAA,EAC/C;AAAA;AAAA;AAAA;AAAA;AAAA,EAMM,OAAO,aAA0B;AAAA;AACrC,UAAI,EAAE,+BAA8B,IAAI,KAAK;AAC7C,UAAI,CAAC,aAAa,SAAS,QAAQ,GAAG;AACpC;AACA,QAAAF,KAAI;AAAA,UACF;AAAA,UACA,qEAAc,aAAa,SAAS;AAAA,QACtC;AAAA,MACF;AACA,YAAM,YAAYD,MAAK,KAAK,QAAQ,IAAI,GAAG,KAAK,OAAO,SAAS;AAEhE,iBAAW,QAAQ,aAAa;AAC9B,YAAI,aAAa,KAAK,QAAQ,IAAI;AAClC,YAAI,WAAW,WAAW,KAAK,WAAW,QAAQ,CAAC;AACnD,YAAI,CAAC,UAAU;AAEb,UAAAC,KAAI,QAAQ,kIAAyB,KAAK,cAAS;AACnD,qBAAW,kCAAS,KAAK;AAAA,QAC3B;AACA,YAAI;AACJ,YAAI,KAAK,OAAO,SAAS;AAEvB,cAAI,MAAM,QAAQ,KAAK,OAAO,GAAG;AAG/B,kBAAM,UAAU,KAAK,QAAQ,IAAI,CAAC,SAAS,KAAK,KAAK,EAAE,KAAK,GAAG;AAC/D,uBAAW,KAAK,cAAc,WAAW,SAAS,UAAU,KAAK,MAAM;AACvE,kBAAM,SAASD,MAAK,KAAK,WAAW,OAAO;AAC3C,mBAAO,KAAK,MAAM;AAClB,uBAAWA,MAAK,KAAK,QAAQ,GAAG,aAAa;AAE7C,YAAAC,KAAI,KAAK,4BAAQ,GAAG,aAAa;AAAA,UACnC,OAAO;AACL,YAAAA,KAAI,QAAQ,4BAAQ,GAAG,oGAAyB;AAEhD,uBAAW,KAAK,cAAc,UAAU,UAAU,KAAK,MAAM;AAC7D,uBAAWD,MAAK,KAAK,WAAW,GAAG,aAAa;AAChD,YAAAC,KAAI,KAAK,4BAAQ,GAAG,aAAa;AACjC,mBAAO,KAAK,SAAS;AAAA,UACvB;AAAA,QACF,OAAO;AAEL,qBAAW,KAAK,cAAc,UAAU,UAAU,KAAK,MAAM;AAC7D,qBAAWD,MAAK,KAAK,WAAW,GAAG,aAAa;AAChD,UAAAC,KAAI,KAAK,4BAAQ,GAAG,aAAa;AACjC,iBAAO,KAAK,SAAS;AAAA,QACvB;AACA,WAAG,cAAc,UAAU,YAAY;AAAA,UACrC,UAAU;AAAA,QACZ,CAAC;AAAA,MACH;AACA,MAAAA,KAAI,OAAO,4BAAQ,4CAAU;AAAA,IAC/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,cAAc,UAAkB,YAAoB,QAAgB;AAClE,QAAI;AACJ,QAAI,KAAK,eAAe,SAAS,QAAQ,GAAG;AAC1C,YAAM,cAAc,GAAG,cAAc;AACrC,MAAAA,KAAI,QAAQ,4BAAQ,GAAG,oGAA8B,gBAAgB;AACrE,gBAAU;AAAA,IACZ,OAAO;AACL,gBAAU;AACV,WAAK,eAAe,KAAK,QAAQ;AAAA,IACnC;AACA,WAAO;AAAA,EACT;AACF;AAEA,IAAO,gBAAQ;;;AGrGf,SAAS,OAAAA,YAAW;AACpB,OAAO,sBAAqD;AAM5D,IAAM,mBAAN,MAAuB;AAAA,EAOrB,YAAY,QAA0B;AACpC,SAAK,SAAS;AACd,SAAK,MAAM,IAAI,iBAAiB,MAAM;AACtC,SAAK,gBAAgB,IAAI,cAAc,EAAE,2BAAyB,WAAW,OAAO,UAAU,CAAC;AAC/F,SAAK,UAAU,KAAK,cAAc,WAAW;AAAA,EAC/C;AAAA,EAEM,OAAO,aAA0B;AAAA;AACrC,MAAAA,KAAI,KAAK,6CAAoB;AAG7B,YAAM,kBAAkB,YAAY,KAAK,CAAC,GAAG,MAAM;AACjD,YAAI,CAAC,EAAE,WAAW,CAAC,EAAE,SAAS;AAC5B,iBAAO;AAAA,QACT;AACA,eAAO,EAAE,QAAQ,SAAS,EAAE,QAAQ;AAAA,MACtC,CAAC;AAED,YAAM,eAAe,MAAM,KAAK,IAAI,gBAAgB;AACpD,UAAI,cAAuB,CAAC;AAE5B,mBAAa,QAAQ,CAAC,SAAS;AAC7B,oBAAY,KAAK,KAAK,IAAI;AAAA,MAC5B,CAAC;AAED,iBAAW,eAAe,iBAAiB;AAEzC,oBAAY,YAAY,KAAK,QAAQ,WAAW;AAEhD,cAAM,gBAAgB,YAAY,YAAY,WAAW,KAAK;AAC9D,YAAI,eAAe;AACjB,UAAAA,KAAI,KAAK,4BAAQ,cAAc,KAAK;AAEpC,gBAAM,eAAe,MAAM,KAAK,IAAI,YAAY,cAAc,EAAE;AAChE,gBAAM,UAAU,aAAa,QAAQ,SAAS;AAC9C,gBAAM,KAAK,IAAI,WAAW,aAAa,cAAc,IAAI,OAAO;AAAA,QAClE,OAAO;AACL,UAAAA,KAAI,KAAK,4BAAQ,YAAY,WAAW,KAAK;AAG7C,cAAI,WAAW;AACf,gBAAM,UAAU,YAAY;AAC5B,cAAI,mCAAS,QAAQ;AACnB,kBAAM,cAAc,QAAQ,QAAQ,SAAS,CAAC,EAAE;AAChD,uBAAW,YAAY,WAAW,EAAE;AAAA,UACtC;AAGA,cAAI;AACF,kBAAM,cAAc,MAAM,KAAK,IAAI,WAAW,aAAa,QAAQ;AAEnE,wBAAY,YAAY,KAAK,IAAI;AAAA,UACnC,SAAS,GAAP;AAEA,gBAAI,EAAE,QAAQ,QAAQ,uCAAuC,IAAI,IAAI;AACnE,cAAAA,KAAI;AAAA,gBACF;AAAA,gBACA,mFAA4B,YAAY,WAAW;AAAA,cACrD;AAAA,YACF,OAAO;AACL,cAAAA,KAAI,IAAI,4BAAQ,EAAE,OAAO;AAAA,YAC3B;AAAA,UACF;AAAA,QACF;AAAA,MACF;AACA,MAAAA,KAAI,OAAO,4BAAQ,4CAAU;AAAA,IAC/B;AAAA;AACF;AAEA,IAAO,qBAAQ;;;ACzEf,IAAM,SAAN,MAAa;AAAA,EAIX,YAAY,QAAsB;AAChC,SAAK,SAAS;AAEd,SAAK,WAAW;AAAA,EAClB;AAAA,EAEA,aAAa;AACX,QAAI,KAAK,OAAO,4CAA4C;AAC1D,YAAM,SAAS,KAAK,OAAO;AAC3B,WAAK,eAAe,IAAI,mBAAiB,MAAM;AAAA,IACjD,OAAO;AACL,YAAM,SAAS,KAAK,OAAO;AAC3B,WAAK,eAAe,IAAI,cAAY,MAAM;AAAA,IAC5C;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA,EAMM,OAAO,aAA0B;AAAA;AACrC,WAAK,aAAa,OAAO,WAAW;AAAA,IACtC;AAAA;AACF;AAEA,IAAO,iBAAQ;;;ACrCf,cAAc;AACd,cAAc;AACd,IAAO,cAAQ","sourcesContent":["import filenamify from 'filenamify'\nimport path from 'path'\nimport mkdirp from 'mkdirp'\nimport { out } from '@elog/shared'\nimport fs from 'fs'\nimport { AdapterFunction, LocalConfig } from '../types'\nimport { FileNameEnum, fileNameList } from '../const'\nimport { DocDetail } from '@elog/types'\nimport { AdapterClient } from '../adapter'\n\nclass DeployLocal {\n  config: LocalConfig\n  cacheFileNames: string[] = []\n  adapterClient: AdapterClient\n  /** æ–‡æ¡£å¤„ç†é€‚é…å™¨ */\n  adapter: AdapterFunction\n\n  constructor(config: LocalConfig) {\n    this.config = config\n    this.adapterClient = new AdapterClient({ format: config.format, formatExt: config.formatExt })\n    this.adapter = this.adapterClient.getAdapter()\n  }\n\n  /**\n   * æœ¬åœ°éƒ¨ç½²\n   * @param articleList\n   */\n  async deploy(articleList: DocDetail[]) {\n    let { filename = FileNameEnum.TITLE } = this.config\n    if (!fileNameList.includes(filename)) {\n      filename = FileNameEnum.TITLE\n      out.warning(\n        'é…ç½®é”™è¯¯',\n        `æ–‡ä»¶å‘½åæ–¹å¼ç›®å‰åªæ”¯æŒ${fileNameList.toString()}ï¼Œå°†é»˜è®¤ä»¥titleå½¢å¼å‘½å`,\n      )\n    }\n    const outputDir = path.join(process.cwd(), this.config.outputDir)\n\n    for (const post of articleList) {\n      let formatBody = this.adapter(post)\n      let fileName = filenamify(post.properties[filename])\n      if (!fileName) {\n        // æ²¡æœ‰æ–‡ä»¶åçš„æ–‡æ¡£\n        out.warning(`å­˜åœ¨æœªå‘½åæ–‡æ¡£ï¼Œå°†è‡ªåŠ¨é‡å‘½åä¸ºã€æœªå‘½åæ–‡æ¡£_${post.doc_id}ã€‘`)\n        fileName = `æœªå‘½åæ–‡æ¡£_${post.doc_id}`\n      }\n      let postPath: string\n      if (this.config.catalog) {\n        // å¼€å¯æŒ‰ç›®å½•ç”Ÿæˆ\n        if (Array.isArray(post.catalog)) {\n          // æ˜¯å¦å­˜åœ¨ç›®å½•\n          // NOTE ç›®å‰åªæœ‰è¯­é›€è¿”å›äº†è¿™ä¸ªç›®å½•ä¿¡æ¯\n          const tocPath = post.catalog.map((item) => item.title).join('/')\n          fileName = this.checkFileName(fileName + tocPath, fileName, post.doc_id)\n          const outdir = path.join(outputDir, tocPath)\n          mkdirp.sync(outdir)\n          postPath = path.join(outdir, `${fileName}.md`)\n          // ç”Ÿæˆæ–‡ä»¶å¤¹\n          out.info('ç”Ÿæˆæ–‡æ¡£', `${fileName}.md`)\n        } else {\n          out.warning('ç›®å½•ç¼ºå¤±', `${fileName}ç¼ºå¤±ç›®å½•ä¿¡æ¯ï¼Œå°†ç”Ÿæˆåœ¨æŒ‡å®šç›®å½•`)\n          // ä¸å­˜åœ¨åˆ™ç›´æ¥ç”Ÿæˆ\n          fileName = this.checkFileName(fileName, fileName, post.doc_id)\n          postPath = path.join(outputDir, `${fileName}.md`)\n          out.info('ç”Ÿæˆæ–‡æ¡£', `${fileName}.md`)\n          mkdirp.sync(outputDir)\n        }\n      } else {\n        // ç›´æ¥ç”Ÿæˆ\n        fileName = this.checkFileName(fileName, fileName, post.doc_id)\n        postPath = path.join(outputDir, `${fileName}.md`)\n        out.info('ç”Ÿæˆæ–‡æ¡£', `${fileName}.md`)\n        mkdirp.sync(outputDir)\n      }\n      fs.writeFileSync(postPath, formatBody, {\n        encoding: 'utf8',\n      })\n    }\n    out.access('ä»»åŠ¡ç»“æŸ', 'ğŸ‰æ›´æ–°æˆåŠŸğŸ‰')\n  }\n\n  /**\n   * æ£€æŸ¥æ–‡ä»¶å\n   * @param fileName\n   * @param originName\n   * @param doc_id\n   */\n  checkFileName(fileName: string, originName: string, doc_id: string) {\n    let newName: string\n    if (this.cacheFileNames.includes(fileName)) {\n      const newFileName = `${originName}_${doc_id}`\n      out.warning('æ–‡æ¡£é‡å¤', `${originName}.mdæ–‡æ¡£å·²å­˜åœ¨ï¼Œå°†ä¸ºè‡ªåŠ¨é‡å‘½åä¸º${newFileName}.md`)\n      newName = newFileName\n    } else {\n      newName = originName\n      this.cacheFileNames.push(fileName)\n    }\n    return newName\n  }\n}\n\nexport default DeployLocal\n","/**\n * éƒ¨ç½²å¹³å°\n */\nexport enum DeployPlatformEnum {\n  LOCAL = 'local',\n  CONFLUENCE = 'confluence',\n}\n\n/**\n * æœ¬åœ°éƒ¨ç½²ç›¸å…³\n */\nexport enum FileNameEnum {\n  TITLE = 'title',\n  URLNAME = 'urlname',\n}\nexport enum FormatEnum {\n  MARKDOWN = 'markdown',\n  MATTER_MARKDOWN = 'matter-markdown',\n  HTML = 'html',\n  WIKI = 'wiki',\n}\n\nexport const fileNameList = Object.values(FileNameEnum)\n\nexport const formatList = Object.values(FormatEnum)\n","import { out } from '@elog/shared'\nimport path from 'path'\nimport {\n  htmlAdapter,\n  markdownAdapter,\n  matterMarkdownAdapter,\n  wikiAdapter,\n} from '@elog/plugin-adapter'\nimport { AdapterConfig, AdapterFunction } from '../types'\nimport { FormatEnum, formatList } from '../const'\n\n/**\n * æ–‡æ¡£å¤„ç†é€‚é…å™¨\n */\nexport class AdapterClient {\n  config: AdapterConfig\n  ctx: AdapterFunction\n\n  constructor(config: AdapterConfig) {\n    this.config = config\n    this.ctx = this.initAdapter()\n  }\n\n  /**\n   * åˆå§‹åŒ–é€‚é…å™¨\n   * @private\n   */\n  private initAdapter() {\n    if (this.config.formatExt) {\n      out.warning('æ³¨æ„', 'æ­£åœ¨åŠ è½½æ–‡æ¡£å¤„ç†æ‹“å±•ç‚¹ï¼Œè¯·éµå¾ªæ–‡æ¡£å¤„ç†æ‹“å±•ç‚¹æ³¨å…¥è§„èŒƒ')\n      try {\n        // åŠ è½½æ‹“å±•ç‚¹\n        // å¦‚æœæŒ‡å®šäº†secretæ‹“å±•ç‚¹ï¼Œé‚£ä¹ˆæ‹“å±•ç‚¹è¿”å›çš„è´¦å·å¯†ç ä¿¡æ¯ï¼Œå°†ä¼šè¦†ç›–elog-config.jsonä¸­çš„imageä¿¡æ¯\n        const formatExtPath = path.resolve(process.cwd(), this.config.formatExt)\n        // æ‹“å±•ç‚¹éœ€è¦æš´éœ²formatæ–¹æ³•\n        const { format } = require(formatExtPath)\n        return format\n      } catch (e: any) {\n        out.err(e.message)\n        out.err('æ–‡æ¡£å¤„ç†æ‹“å±•ç‚¹åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ï¼')\n        process.exit(1)\n      }\n    } else {\n      switch (this.config.format) {\n        case FormatEnum.MARKDOWN:\n          return markdownAdapter\n        case FormatEnum.MATTER_MARKDOWN:\n          return matterMarkdownAdapter\n        case FormatEnum.WIKI:\n          return wikiAdapter\n        case FormatEnum.HTML:\n          return htmlAdapter\n        default:\n          out.warning(`ç›®å‰åªæ”¯æŒå°†æ–‡æ¡£è½¬æ¢ä¸º${formatList.toString()}ï¼Œå°†é»˜è®¤ä»¥markdownå½¢å¼è½¬æ¢`)\n          return markdownAdapter\n      }\n    }\n  }\n\n  /**\n   * è·å–æ–‡æ¡£å¤„ç†å™¨\n   */\n  public getAdapter() {\n    return this.ctx\n  }\n}\n","import { out } from '@elog/shared'\nimport ConfluenceClient, { ConfluenceConfig, WikiMap } from '@elog/sdk-confluence'\nimport { DocDetail } from '@elog/types'\nimport { AdapterClient } from '../adapter'\nimport { AdapterFunction } from '../types'\nimport { FormatEnum } from '../const'\n\nclass DeployConfluence {\n  config: ConfluenceConfig\n  ctx: ConfluenceClient\n  adapterClient: AdapterClient\n  /** æ–‡æ¡£å¤„ç†é€‚é…å™¨ */\n  adapter: AdapterFunction\n\n  constructor(config: ConfluenceConfig) {\n    this.config = config\n    this.ctx = new ConfluenceClient(config)\n    this.adapterClient = new AdapterClient({ format: FormatEnum.WIKI, formatExt: config.formatExt })\n    this.adapter = this.adapterClient.getAdapter()\n  }\n\n  async deploy(articleList: DocDetail[]) {\n    out.info('æ­£åœ¨éƒ¨ç½²åˆ°Confluence...')\n    // é‡æ–°æ’åºarticleListï¼ŒæŒ‰ç…§å±‚çº§æ›´æ–°æ–‡ç« \n    // å…ˆæ›´æ–°ç¬¬ä¸€çº§ï¼Œå†æ›´æ–°ç¬¬äºŒçº§...\n    const sortArticleList = articleList.sort((a, b) => {\n      if (!a.catalog || !b.catalog) {\n        return 0\n      }\n      return a.catalog.length - b.catalog.length\n    })\n    // è·å–rootPageä¸‹çš„æ–‡ç« åˆ—è¡¨\n    const rootPageList = await this.ctx.getRootPageList()\n    let rootPageMap: WikiMap = {}\n    // Listè½¬Map\n    rootPageList.forEach((item) => {\n      rootPageMap[item.title] = item\n    })\n    // æ ¹æ®ç›®å½•ä¸Šä¼ åˆ°wikiä¸Š\n    for (const articleInfo of sortArticleList) {\n      // å°†markdownè½¬wiki\n      articleInfo.body_wiki = this.adapter(articleInfo)\n      // æ˜¯å¦å­˜åœ¨\n      const cacheWikiPage = rootPageMap[articleInfo.properties.title]\n      if (cacheWikiPage) {\n        out.info('æ›´æ–°æ–‡æ¡£', cacheWikiPage.title)\n        // è·å–ç‰ˆæœ¬ä¿¡æ¯\n        const updatingPage = await this.ctx.getPageById(cacheWikiPage.id)\n        const version = updatingPage.version.number + 1\n        await this.ctx.updatePage(articleInfo, cacheWikiPage.id, version)\n      } else {\n        out.info('æ–°å¢æ–‡æ¡£', articleInfo.properties.title)\n        // æ–°å¢\n        // åœ¨rootPageMapä¸­æ‰¾åˆ°parent title\n        let parentId = ''\n        const catalog = articleInfo.catalog\n        if (catalog?.length) {\n          const parentTitle = catalog[catalog.length - 1].title\n          parentId = rootPageMap[parentTitle].id\n        }\n        // ç›´æ¥æ–°å¢\n        // å¦‚æœæœ‰parentIdå°±å­˜åœ¨parentPageä¸‹ï¼Œæ²¡æœ‰åˆ™å­˜åœ¨ç©ºé—´çš„rootPageä¸‹\n        try {\n          const createdPage = await this.ctx.createPage(articleInfo, parentId)\n          // ä¸´æ—¶æ›´æ–°Map\n          rootPageMap[createdPage.title] = createdPage\n        } catch (e: any) {\n          // æœ‰å¯èƒ½æ˜¯é‡åæ›´æ–°å¤±è´¥\n          if (e.message.indexOf('A page with this title already exists') > -1) {\n            out.err(\n              'è·³è¿‡éƒ¨ç½²',\n              `æ–‡ç« æ ‡é¢˜å·²å­˜åœ¨äºconfluence, è¯·æ£€æŸ¥: ${articleInfo.properties.title}`,\n            )\n          } else {\n            out.err('è·³è¿‡éƒ¨ç½²', e.message)\n          }\n        }\n      }\n    }\n    out.access('ä»»åŠ¡ç»“æŸ', 'ğŸ‰æ›´æ–°æˆåŠŸğŸ‰')\n  }\n}\n\nexport default DeployConfluence\n","import DeployLocal from './platform/local'\nimport DeployConfluence from './platform/confluence'\nimport { DeployPlatformEnum } from './const'\nimport { DeployConfig, LocalConfig } from './types'\nimport { ConfluenceConfig } from '@elog/sdk-confluence'\nimport { DocDetail } from '@elog/types'\n\n/**\n * éƒ¨ç½²å™¨\n */\nclass Deploy {\n  config: DeployConfig\n  deployClient: any\n\n  constructor(config: DeployConfig) {\n    this.config = config\n    // åˆå§‹åŒ–éƒ¨ç½²æ–¹å¼\n    this.initDeploy()\n  }\n\n  initDeploy() {\n    if (this.config.platform === DeployPlatformEnum.CONFLUENCE) {\n      const config = this.config.confluence as ConfluenceConfig\n      this.deployClient = new DeployConfluence(config)\n    } else {\n      const config = this.config.local as LocalConfig\n      this.deployClient = new DeployLocal(config)\n    }\n  }\n\n  /**\n   * éƒ¨ç½²é…ç½®\n   * @param articleList\n   */\n  async deploy(articleList: DocDetail[]) {\n    this.deployClient.deploy(articleList)\n  }\n}\n\nexport default Deploy\n","import Deploy from './client'\nexport * from './types'\nexport * from '@elog/plugin-adapter'\nexport * from '@elog/sdk-confluence'\nexport default Deploy\n"]}