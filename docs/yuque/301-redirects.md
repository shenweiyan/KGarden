> ğŸ“¢ **åŸŸå **[**https://weiyan.cc**](https://weiyan.cc)** å°±æ˜¯åŸºäºæœ¬æ–‡ç« ä¸­çš„ "**[**æ— æœåŠ¡å™¨**](#pG3U6)**" æ­¥éª¤å®ç°çš„ä¸ªäººåŸŸåè·³è½¬è‡³è¯­é›€ä¸ªäººä¸»é¡µï¼**
>
>      å› æ­¤ï¼Œæœ¬ç¯‡æ–‡æ¡£ä½ ä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹çš„é“¾æ¥è®¿é—®ï¼š[**https://weiyan.cc/cookbook/301-redirects**](https://weiyan.cc/cookbook/301-redirects)**ï¼**

è¯­é›€çš„ä¸ªäººä½¿ç”¨ç›®å‰æ˜¯ä¸æ”¯æŒè‡ªå®šä¹‰åŸŸåçš„ï¼Œè™½ç„¶ç©ºé—´çš„ä½¿ç”¨å¯ä»¥è‡ªå®šä¹‰äºŒçº§åŸŸåï¼Œå¦‚ï¼š[weiyan.yuque.com](https://weiyan.yuque.com/)ï¼Œä½†æ˜¯ç©ºé—´çŸ¥è¯†åº“å¿…é¡»è¦å…ˆç™»å½•ï¼Œä¸æ–¹ä¾¿å…¶ä»–äººæŸ¥çœ‹ï¼Œå°¤å…¶æ˜¯å¯¹äºæ²¡æœ‰æ³¨å†Œè¯­é›€çš„ç”¨æˆ·ã€‚

ç°åœ¨çš„æƒ…å†µæ˜¯ï¼Œæˆ‘æœ‰ä¸€ä¸ªå·²ç»å¤‡æ¡ˆçš„ä¸ªäººåŸŸå www.example.comï¼Œç°åœ¨æˆ‘æƒ³ï¼š

- è®©æ‰€æœ‰ www.example.com çš„è®¿é—®åœ°å€éƒ½è·³è½¬åˆ° [https://www.yuque.com/shenweiyan](https://www.yuque.com/shenweiyan)ï¼Œæ¯”å¦‚ https://www.example.com/cookbook è·³è½¬åˆ° [https://www.yuque.com/shenweiyan/cookbook](https://www.yuque.com/shenweiyan/cookbook)ã€‚
- www.example.com çš„è®¿é—®åœ°å€è·³è½¬åŒæ—¶æ”¯æŒ http/httpsã€‚
- example.com/www.example.com åŒæ—¶å®ç°ä»¥ä¸Šè·³è½¬ã€‚

åæ­£å°±ä¸€å¥è¯ï¼Œè®©ä¸‹é¢çš„é“¾æ¥éƒ½è·³è½¬åˆ° [https://www.yuque.com/shenweiyan](https://www.yuque.com/shenweiyan)ï¼š

- http://example.com
- http://www.example.com
- https://example.com
- https://www.example.com

ä¸‹é¢ç®€å•è®°å½•ä¸€ä¸‹å…·ä½“çš„å®ç°è¿‡ç¨‹ã€‚

# èƒŒæ™¯çŸ¥è¯†

**æ˜¾æ€§ URL è½¬å‘ï¼š**ç”¨çš„æ˜¯ 301 é‡å®šå‘æŠ€æœ¯ï¼Œæ•ˆæœä¸ºæµè§ˆå™¨åœ°å€æ è¾“å…¥ [http://a.com](http://a.com/) å›è½¦ï¼Œæ‰“å¼€ç½‘ç«™å†…å®¹æ˜¯ç›®æ ‡åœ°å€ [http://cloud.baidu.com/](http://cloud.baidu.com/) çš„ç½‘ç«™å†…å®¹ï¼Œä¸”**åœ°å€æ æ˜¾ç¤ºç›®æ ‡åœ°å€ **[**http://cloud.baidu.com/**](http://cloud.baidu.com/) ã€‚

**éšæ€§ URL è½¬å‘ï¼š**ç”¨çš„æ˜¯ iframe æ¡†æ¶æŠ€æœ¯ã€éé‡å®šå‘æŠ€æœ¯ï¼Œæ•ˆæœä¸ºæµè§ˆå™¨åœ°å€æ è¾“å…¥ [http://a.com](http://a.com/) å›è½¦ï¼Œæ‰“å¼€ç½‘ç«™å†…å®¹æ˜¯ç›®æ ‡åœ°å€ [http://cloud.baidu.com/](http://cloud.baidu.com/) çš„ç½‘ç«™å†…å®¹ï¼Œ**ä½†åœ°å€æ æ˜¾ç¤ºå½“å‰åœ°å€ **[**http://a.com**](http://a.com/) ã€‚

**301 é‡å®šå‘æ˜¯ä»€ä¹ˆï¼Ÿ**

301 é‡å®šå‘è¡¨ç¤ºç½‘é¡µç”±ä¸€ä¸ªåœ°å€æ°¸ä¹…åœ°ç§»åŠ¨åˆ°äº†å¦å¤–ä¸€ä¸ªåœ°å€ã€‚è¿™é‡Œä¸­çš„ 301 æ˜¯è¢«é‡å®šå‘ç½‘é¡µçš„ HTTP çŠ¶æ€ä»£ç ã€‚

**ä¾‹å¦‚ï¼š**[blog.ahrefs.com](https://blog.ahrefs.com/) é‡å®šå‘åˆ°äº† [ahrefs.com/blog](https://ahrefs.com/blog)ã€‚

ç®€å•æ¥è¯´ï¼Œ301 é‡å®šå‘æ˜¯åœ¨å‘Šè¯‰æµè§ˆå™¨ï¼šâ€œè¿™ä¸ªé¡µé¢å·²ç»æ°¸ä¹…è¿ç§»äº†ã€‚è¿™ä¸ªæ˜¯æ–°çš„åœ°å€ï¼Œæˆ‘ä»¬ä¸æ‰“ç®—æŠŠå®ƒç§»å›å»å•¦ã€‚â€è¿™æ—¶ï¼Œæµè§ˆå™¨ä¼šå›å¤ï¼šâ€œæ²¡é—®é¢˜ï¼æˆ‘ç°åœ¨ï¼ˆå¼€å§‹ï¼‰å°±æŠŠç”¨æˆ·å¼•å‘è¿™é‡Œï¼â€

è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè®¿é—® blog.ahrefs.com å·²ç»ä¸å¯èƒ½äº†ã€‚ä½ æœ€åä¼šå»åˆ°çš„ç½‘é¡µæ˜¯ ahrefs.com/blogã€‚

# å‰ææ¡ä»¶

å‰ææ¡ä»¶å¯ä»¥åˆ†ä¸º**æœ‰æœåŠ¡å™¨**å’Œ**æ— æœåŠ¡å™¨**ä¸¤ç§æƒ…å†µï¼Œä¸‹é¢å…·ä½“è¯´ä¸€ä¸‹ã€‚

1. æœ‰æœåŠ¡å™¨ï¼ˆå¯ä»¥è€ƒè™‘è…¾è®¯äº‘æˆ–è€…é˜¿é‡Œäº‘çš„è½»é‡äº‘æœåŠ¡å™¨ï¼ŒåŒåä¸€ä¼˜æƒ ä»·ä¸€å¹´ä¹Ÿå°±å‡ åå—ï¼‰ï¼›

   - é˜¿é‡Œäº‘è½»é‡äº‘æœåŠ¡å™¨ï¼š[è´­ä¹°é“¾æ¥](https://www.aliyun.com/activity/1111?userCode=mx65q35j)
   - è…¾è®¯äº‘è½»é‡äº‘æœåŠ¡å™¨ï¼š[è´­ä¹°é“¾æ¥](https://curl.qcloud.com/0Sy0R0AX)
   - åŸŸåï¼ˆåŸŸåéœ€è¦å·²ç»å®Œæˆå¤‡æ¡ˆï¼‰ï¼›
   - SSL è¯ä¹¦ï¼ˆå¯ä»¥ä½¿ç”¨é˜¿é‡Œäº‘æˆ–è€…è…¾è®¯äº‘çš„å…è´¹åŸŸåè¯ä¹¦ï¼‰ï¼›

2. æ— æœåŠ¡å™¨
   - å¯ä»¥è€ƒè™‘ä½¿ç”¨ [Cloudflare Page Rules](https://support.cloudflare.com/hc/zh-cn/articles/218411427)ï¼ˆé¡µé¢è§„åˆ™ï¼‰ï¼›å½“ç„¶ï¼Œå…¶ä»–çš„å¹³å°ä¹Ÿå¯ä»¥ï¼›
   - åŸŸåï¼ˆæœ‰äº›åŸŸåå¯ä»¥ä¸ç”¨å¤‡æ¡ˆï¼‰ï¼›
   - SSL è¯ä¹¦ï¼ˆå¦‚æœä½ ç”¨çš„æ˜¯ [Cloudflare Page Rules](https://support.cloudflare.com/hc/zh-cn/articles/218411427)ï¼Œå¯ä»¥ä¸ç”¨ SSL è¯ä¹¦ ï¼‰ã€‚

# æ“ä½œæ­¥éª¤ï¼šæœ‰æœåŠ¡å™¨

æœ¬æ“ä½œä»¥ **ncbix.com** åŸŸåä¸ºç¤ºä¾‹ã€‚

## 1. åŸŸåè§£æ

åœ¨ä½ çš„åŸŸåä¾›åº”å•†åå°ç‚¹å‡»â€œæ·»åŠ è®°å½•â€ï¼Œåˆ†åˆ«è¾“å…¥ www å’Œ @ï¼Œè®°å½•ç±»å‹â€œAâ€ï¼Œè®°å½•å€¼å°±æ˜¯ä½ è™šæ‹Ÿä¸»æœºæˆ– VPS æœåŠ¡å™¨çš„ IP åœ°å€ï¼Œæœ€åä¿å­˜ã€‚ä»¥ DNSPOD ä¸ºä¾‹ã€‚
![image.png](https://cdn.nlark.com/yuque/0/2021/png/126032/1637040961966-ff66c403-303d-42ad-a4ed-6d20f71a5466.png#averageHue=%23fefefd&clientId=uaf222485-97ae-4&from=paste&height=238&id=ub5f56ed4&originHeight=238&originWidth=1348&originalType=binary&ratio=1&rotation=0&showTitle=false&size=28718&status=done&style=none&taskId=u9daa7931-ddc7-4c6e-ba55-23fbf8ab02e&title=&width=1348)

## 2. SSL è¯ä¹¦

ç”³è¯·å…è´¹è¯ä¹¦ï¼Œå…·ä½“æ“ä½œå¯ä»¥è‡ªè¡Œç™¾åº¦ã€‚ä»¥è…¾è®¯äº‘ä¸ºä¾‹ï¼š[https://console.cloud.tencent.com/ssl](https://console.cloud.tencent.com/ssl)ã€‚
![image.png](https://cdn.nlark.com/yuque/0/2021/png/126032/1637041374522-15215315-4190-4845-8a40-ef422179e264.png#averageHue=%23fcfcfc&clientId=uaf222485-97ae-4&from=paste&height=583&id=u85985aec&originHeight=583&originWidth=1380&originalType=binary&ratio=1&rotation=0&showTitle=false&size=87121&status=done&style=none&taskId=u6d80be60-8bf3-4473-bae6-065a5b93ca7&title=&width=1380)
æ ¹æ®æˆªå›¾ï¼Œä¸€æ­¥æ­¥ç‚¹å‡»æ“ä½œã€‚ç”³è¯·å®Œæˆåï¼ŒæŠŠè¯ä¹¦ä¸‹è½½å¹¶ä¸Šä¼ åˆ°ä½ çš„æœåŠ¡å™¨ã€‚
![image.png](https://cdn.nlark.com/yuque/0/2021/png/126032/1637041621817-c9b376fb-5bfb-426d-bd00-6452e743f466.png#averageHue=%23ade1f0&clientId=uaf222485-97ae-4&from=paste&height=185&id=u65a43a05&originHeight=185&originWidth=1373&originalType=binary&ratio=1&rotation=0&showTitle=false&size=25423&status=done&style=none&taskId=u2ec94c1e-c87c-4ce7-86a8-7531f96ac03&title=&width=1373)

## 3. å®‰è£… Nginx

å¯ä»¥ç›´æ¥ä½¿ç”¨ **yum/apt** çš„æ–¹å¼ç›´æ¥å®‰è£…ï¼›æºç æ–¹å¼çš„å®‰è£…ï¼Œå‚è€ƒï¼šã€Š[CentOS 7 ä¸‹ç¼–è¯‘å®‰è£… Nginx Â· è¯­é›€](https://www.yuque.com/shenweiyan/cookbook/centos-install-nginx)ã€‹ã€‚

```bash
# Debian/Ubuntu
apt update
apt install nginx

# CentOS/RHEL
yum install nginx
```

## 4. é…ç½® Nginx

é€šè¿‡ **yum/apt** å®‰è£…çš„ Nginx é»˜è®¤çš„ç½®æ–‡ä»¶åœ¨ **/etc/nginx/nginx.conf**ï¼Œç¼–è¾‘è¯¥æ–‡ä»¶ã€‚

```nginx
http {
    ##
    # Basic Settings
    ##
    ......

    ##
    # Virtual Host Configs
    ##
server {
    listen 80;
    listen 443 ssl;
    server_name ncbix.com www.ncbix.com;
    ssl_certificate /etc/nginx/ssl/nginx/www.ncbix.com_bundle.crt;
    ssl_certificate_key /etc/nginx/ssl/nginx/www.ncbix.com.key;
    index  index.php index.html index.htm;

    if ( $scheme = "http" ) {
        return 301 https://www.yuque.com/shenweiyan$request_uri; #ç¡®ä¿è·³è½¬åˆ°æ–°åŸŸåHTTPSå¦‚æœæ²¡æœ‰HTTPSå¯ä»¥å»æ‰
    }
    location / {
        rewrite /.* https://www.yuque.com/shenweiyan$uri redirect; #è·³è½¬åˆ°æ–°åŸŸåå¹¶é‡å†™ä¸ºæ–°åŸŸå
    }
  }

include /etc/nginx/conf.d/*.conf;
    include /etc/nginx/sites-enabled/*;
}
```

## 5. é‡å¯ Nginx

æœ€åï¼Œé€šè¿‡ä¸‹é¢çš„å‘½ä»¤é‡å¯ Nginx æœåŠ¡å³å¯ã€‚

```bash
service nginx restart
```

# æ“ä½œæ­¥éª¤ï¼šæ— æœåŠ¡å™¨

æˆ‘ä»¬ä»¥ [Cloudflare Page Rules](https://support.cloudflare.com/hc/zh-cn/articles/218411427) ä¸ºä¾‹ï¼Œè¯´æ˜ä¸€ä¸‹å…·ä½“æ€ä¹ˆæ“ä½œã€‚

## 1. Cloudflare ä¸­æ·»åŠ ç«™ç‚¹

![image.png](https://cdn.nlark.com/yuque/0/2022/png/126032/1643181795250-a5687a6b-44a9-48d7-94e2-0ff6c48a7a07.png#averageHue=%23e7bb89&clientId=uf85dfbeb-99c4-4&from=paste&height=333&id=uaea79516&originHeight=333&originWidth=1028&originalType=binary&ratio=1&rotation=0&showTitle=false&size=47662&status=done&style=none&taskId=u47af25e5-b74d-498a-904a-c5ec1547b2b&title=&width=1028)
æ·»åŠ å®Œç«™ç‚¹åï¼Œå¯ä»¥é€‰æ‹© **Free è®¡åˆ’**ï¼Œç„¶åç‚¹å‡»ç»§ç»­ï¼š
![image.png](https://cdn.nlark.com/yuque/0/2022/png/126032/1643181876312-e391cdd1-bb8d-4081-9a4e-842ad8874566.png#averageHue=%23faf9f8&clientId=uf85dfbeb-99c4-4&from=paste&height=555&id=u04e42c28&originHeight=555&originWidth=1028&originalType=binary&ratio=1&rotation=0&showTitle=false&size=65900&status=done&style=none&taskId=u839e6d87-1938-4137-87f2-cceaa1ed0e6&title=&width=1028)
ç‚¹å‡»ç»§ç»­åï¼ŒCloudflare ä¼šè‡ªåŠ¨æ‰«æä½ å¯¹åº”åŸŸåçš„ä¸€äº›è§£æè®°å½•ï¼š
![image.png](https://cdn.nlark.com/yuque/0/2022/png/126032/1649400235588-ee9172ac-d069-44e7-b66d-600a6af0b1ea.png#averageHue=%23fafaf9&clientId=u0fc2d6df-8811-4&from=paste&height=668&id=u1b4409ce&originHeight=668&originWidth=1107&originalType=binary&ratio=1&rotation=0&showTitle=false&size=64019&status=done&style=none&taskId=u7bc07247-2db7-4a45-ac18-ace06bd61a4&title=&width=1107)
æˆ‘ä»¬å¯ä»¥ç›´æ¥é€‰æ‹© **"ç»§ç»­"**ã€‚
![image.png](https://cdn.nlark.com/yuque/0/2022/png/126032/1643182025314-2bc49d26-ade5-4aaf-97f5-1e1301c09408.png#averageHue=%23faf9f9&clientId=uf85dfbeb-99c4-4&from=paste&height=825&id=uffb95351&originHeight=825&originWidth=1028&originalType=binary&ratio=1&rotation=0&showTitle=false&size=95866&status=done&style=none&taskId=u60e0b392-b4f3-424c-a324-31266d3ca0f&title=&width=1028)

## 2. ä¿®æ”¹åŸŸå DNS

é¦–å…ˆï¼Œæˆ‘çš„åŸŸåæ˜¯åœ¨è…¾è®¯äº‘æ³¨å†Œçš„ï¼Œå¯ä»¥å»è…¾è®¯äº‘æ§åˆ¶å° **"æˆ‘çš„åŸŸå"** ä¸­ç›´æ¥ä¿®æ”¹ DNSï¼š

```python
# æ·»åŠ  Cloudflare åç§°æœåŠ¡å™¨
imani.ns.cloudflare.com
caroline.dnspod.net
```

![image.png](https://cdn.nlark.com/yuque/0/2022/png/126032/1643181320734-08faff0b-6302-4aa0-a5a9-d0a8847868fc.png#averageHue=%23e0c9a2&clientId=uf85dfbeb-99c4-4&from=paste&height=811&id=u81dd9c54&originHeight=811&originWidth=910&originalType=binary&ratio=1&rotation=0&showTitle=false&size=57201&status=done&style=none&taskId=u7723e3b3-fe37-41f5-ba76-34416fca1e6&title=&width=910)
![image.png](https://cdn.nlark.com/yuque/0/2022/png/126032/1643182127916-818ff37a-2994-4ca6-b650-5d295eee965c.png#averageHue=%23d4c9b9&clientId=uf85dfbeb-99c4-4&from=paste&height=506&id=u019b6048&originHeight=506&originWidth=597&originalType=binary&ratio=1&rotation=0&showTitle=false&size=32581&status=done&style=none&taskId=u1da97065-31aa-4a8c-83c9-a42ace0863e&title=&width=597)

## 3. å®Œæˆ Cloudflare æ·»åŠ ç«™ç‚¹

å¯ä»¥æŠŠåé¢å¿«é€ŸæŒ‡å—çš„è¿™å‡ ä¸ªé…ç½®éƒ½å‹¾é€‰ã€‚
![image.png](https://cdn.nlark.com/yuque/0/2022/png/126032/1643182399735-ff607e75-0040-497f-b5ec-4275f8bbe2e5.png#averageHue=%23fcfbfa&clientId=uf85dfbeb-99c4-4&from=paste&height=607&id=uf8d3cf7a&originHeight=607&originWidth=638&originalType=binary&ratio=1&rotation=0&showTitle=false&size=37214&status=done&style=none&taskId=u360c3d43-3c19-44da-9142-cb2d0629670&title=&width=638)
ç­‰å¾…å‡ åˆ†é’Ÿå°±å¯ä»¥çœ‹åˆ°ä½ çš„åŸŸåç«™ç‚¹å·²ç»æ·»åŠ åˆ° Cloudflare ä¸Šäº†ï¼
![image.png](https://cdn.nlark.com/yuque/0/2022/png/126032/1643182518799-c126a319-776f-426d-ae4a-8c18b1be5073.png#averageHue=%23fcfcfc&clientId=uf85dfbeb-99c4-4&from=paste&height=463&id=u4f2a0821&originHeight=463&originWidth=1004&originalType=binary&ratio=1&rotation=0&showTitle=false&size=26074&status=done&style=none&taskId=u6018c27f-a37a-4851-9cfa-9f6acfd9fe8&title=&width=1004)

## 4. è®¾ç½® DNS è®°å½•

> The first thing you will need is a DNS record for **@**, **www** and any other subdomains you want to redirect, set to ![image.png](https://cdn.nlark.com/yuque/0/2022/png/126032/1662348295530-d1cb3b58-35bb-4783-b1c3-45d0cb5fc11d.png#averageHue=%237a470c&clientId=u3676b463-d195-4&from=paste&height=16&id=u0c517c2a&originHeight=100&originWidth=100&originalType=url&ratio=1&rotation=0&showTitle=false&size=4518&status=done&style=none&taskId=u8d360cb9-3931-4b92-816a-6273fe78722&title=&width=16). This can point to any IP address as the redirection page rule will execute first. I would recommend pointing them to 192.0.2.1 , a dummy IP.
>
> Fromï¼š[https://community.cloudflare.com/t/redirecting-one-domain-to-another/81960](https://community.cloudflare.com/t/redirecting-one-domain-to-another/81960)

åœ¨é…ç½® Cloudflare ç«™ç‚¹çš„é¡µé¢è§„åˆ™å‰ï¼Œä½ éœ€è¦æŠŠè¯¥åŸŸåçš„ **@**ï¼Œ**www** æˆ–è€…å…¶ä»–ä½ æƒ³è¦è¿›è¡Œé‡å®šå‘çš„å­åŸŸåæ·»åŠ åˆ° DNS è®°å½•ä¸­ï¼Œè¿™ä¸ªè®°å½•çš„å€¼å¯ä»¥æŒ‡å‘ä»»ä½• IP åœ°å€ï¼Œå› ä¸ºé‡å®šå‘é¡µé¢è§„åˆ™å°†é¦–å…ˆæ‰§è¡Œã€‚æˆ‘å»ºè®®å°†å®ƒä»¬æŒ‡å‘ 192.0.2.1 ï¼Œä¸€ä¸ªè™šæ‹Ÿ IPã€‚

åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä»¥ **@** å’Œ **note** å­åŸŸåä¸ºä¾‹ï¼Œæ·»åŠ  DNS è®°å½•ï¼Œå…ˆè®©å®ƒä»¬æŒ‡å‘ä¸€ä¸ªè™šæ‹Ÿ IPã€‚
![ä»¥ ncbix.com å’Œ note.ncbix.com ä¸ºä¾‹ï¼Œå‡é‡å®šå‘åˆ° https://www.yuque.com/shenweiyan é¡µé¢](https://cdn.nlark.com/yuque/0/2022/png/126032/1662349252367-99b78bf7-aa47-4ec8-816a-bc0b1b4d8719.png#averageHue=%23f9f9f8&clientId=u3676b463-d195-4&from=paste&height=278&id=uebf1ccd0&originHeight=278&originWidth=1041&originalType=binary&ratio=1&rotation=0&showTitle=true&size=21887&status=done&style=none&taskId=ub971a6db-7119-44ef-a535-5e8a3ff4467&title=%E4%BB%A5%20ncbix.com%20%E5%92%8C%20note.ncbix.com%20%E4%B8%BA%E4%BE%8B%EF%BC%8C%E5%9D%87%E9%87%8D%E5%AE%9A%E5%90%91%E5%88%B0%20https%3A%2F%2Fwww.yuque.com%2Fshenweiyan%20%E9%A1%B5%E9%9D%A2&width=1041 "ä»¥ ncbix.com å’Œ note.ncbix.com ä¸ºä¾‹ï¼Œå‡é‡å®šå‘åˆ° https://www.yuque.com/shenweiyan é¡µé¢")

## 5. é…ç½® Cloudflare ç«™ç‚¹é¡µé¢è§„åˆ™

é¦–å…ˆï¼Œåœ¨ Cloudflare çš„ä¸»é¡µä¸Šç‚¹å‡»å¯¹åº”çš„ç«™ç‚¹ï¼Œé€‰æ‹© **"é¡µé¢è§„åˆ™"**ï¼Œç‚¹å‡»ã€‚
![image.png](https://cdn.nlark.com/yuque/0/2022/png/126032/1643182796686-98f83df4-fba6-4c3a-8a84-5a8ba5498408.png#averageHue=%23fafaf9&clientId=uf85dfbeb-99c4-4&from=paste&height=730&id=u82a5ccd7&originHeight=730&originWidth=1028&originalType=binary&ratio=1&rotation=0&showTitle=false&size=115085&status=done&style=none&taskId=ud03bca0d-393e-4c84-a684-005838f33e1&title=&width=1028)
ç‚¹å‡»**"åˆ›å»ºé¡µé¢è§„åˆ™"**ï¼š
![image.png](https://cdn.nlark.com/yuque/0/2022/png/126032/1643182875178-8c3408c7-1841-4378-96fc-b52990fff40f.png#averageHue=%23f7f6f6&clientId=uf85dfbeb-99c4-4&from=paste&height=486&id=u7e361c20&originHeight=486&originWidth=743&originalType=binary&ratio=1&rotation=0&showTitle=false&size=36975&status=done&style=none&taskId=u2e8738d7-2e4c-4956-97d8-9575925f07e&title=&width=743)
![image.png](https://cdn.nlark.com/yuque/0/2022/png/126032/1643182958149-bfa0363d-f34c-4fa0-995c-aa7e0db4622b.png#averageHue=%23f9f9f8&clientId=uf85dfbeb-99c4-4&from=paste&height=508&id=u58818595&originHeight=508&originWidth=734&originalType=binary&ratio=1&rotation=0&showTitle=false&size=31928&status=done&style=none&taskId=u6d68c9c3-e126-4b78-b79b-1cafce1b788&title=&width=734)
![image.png](https://cdn.nlark.com/yuque/0/2022/png/126032/1662349011274-c9ffd263-54fa-4eb3-bc54-9899732b7150.png#averageHue=%23faf9f8&clientId=u3676b463-d195-4&from=paste&height=546&id=u092369ec&originHeight=546&originWidth=877&originalType=binary&ratio=1&rotation=0&showTitle=false&size=42044&status=done&style=none&taskId=u8ff18b46-1f96-41b6-b801-69c21661763&title=&width=877)
![image.png](https://cdn.nlark.com/yuque/0/2022/png/126032/1662349183068-9ed6e857-6b78-4be0-bc7f-a69663bf8276.png#averageHue=%23f8f8f7&clientId=u3676b463-d195-4&from=paste&height=614&id=u284a7548&originHeight=614&originWidth=1077&originalType=binary&ratio=1&rotation=0&showTitle=false&size=61499&status=done&style=none&taskId=u5d5e1d09-2093-4dcc-8f46-936a2a31521&title=&width=1077)

>

### ä»€ä¹ˆæ˜¯é¡µé¢è§„åˆ™ï¼Ÿ

> é¡µé¢è§„åˆ™ä¸º Cloudflare è®¾ç½®æä¾›åŸºäº URL çš„ç²’åº¦æ§åˆ¶ã€‚å…³äºé¡µé¢è§„åˆ™éœ€è¦äº†è§£çš„æœ€é‡è¦äº‹æƒ…æ˜¯ï¼Œé’ˆå¯¹ä¸€ä¸ª URL ä»…è§¦å‘ä¸€ä¸ªé¡µé¢è§„åˆ™ï¼Œå› æ­¤ä¸€å®šè¦æŒ‰ç…§ä¼˜å…ˆçº§é¡ºåºå¯¹é¡µé¢è§„åˆ™è¿›è¡Œæ’åºå¹¶å°†æœ€å…·ä½“çš„é¡µé¢è§„åˆ™æ”¾åœ¨é¡¶éƒ¨ã€‚

#### é¡µé¢è§„åˆ™ä¸­å…è®¸å“ªäº›æ¨¡å¼ï¼Ÿ

> å¦‚æœä½¿ç”¨çš„æ˜¯è½¬å‘é¡µé¢è§„åˆ™ï¼Œåˆ™å¯ä»¥å°†è¿™äº›é€šé…ç¬¦æ˜ å°„åˆ°å˜é‡ã€‚åœ¨è½¬å‘ URL ä¸­ï¼Œå¯ä»¥æŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºæŒ‡å®šä¸åŸå§‹ URL ä¸­çš„é€šé…ç¬¦ç›¸åŒ¹é…çš„ $1ã€$2ï¼Œä»¥æ­¤ç±»æ¨ã€‚
>
> ä¾‹å¦‚ï¼Œå¯ä»¥å°† http://_.example.com/_ è½¬å‘åˆ° http://$2.example.com/$1.jpgã€‚æ­¤è§„åˆ™å°†ä¸ http://cloud.example.com/flare ç›¸åŒ¹é…ï¼Œè¿™æœ€ç»ˆå°†è½¬å‘åˆ° http://flare.example.com/cloud.jpgã€‚

#### ä¸€äº›æœ‰ç”¨çš„æç¤ºï¼š

> 1. å¦‚æœè¦åŒæ—¶åŒ¹é… http å’Œ httpsï¼Œåªéœ€ç¼–å†™ example.com å³å¯ã€‚æ— éœ€ç¼–å†™ example.comã€‚
> 2. å¦‚æœè¦åŒ¹é…åŸŸä¸­çš„æ¯ä¸ªé¡µé¢ï¼Œåˆ™éœ€è¦ç¼–å†™ example.com/ï¼Œä»…ç¼–å†™ example.com æ˜¯ä¸å¤Ÿçš„ã€‚
> 3. è¯·å‚é˜… [äº†è§£å’Œé…ç½® Cloudflare é¡µé¢è§„åˆ™](https://support.cloudflare.com/hc/articles/218411427) äº†è§£æœ‰å…³é¡µé¢è§„åˆ™æ¨¡å¼çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚

## 6. é…ç½® SSL(ä¸å¿…è¦)

:::info
**ğŸ“¢ Update 2022.09.05ï¼šè¿™ä¸€æ­¥ä¸æ˜¯å¿…è¦çš„ï¼Œè¿™é‡Œä»…ä¾›å‚è€ƒï¼**
:::

1. ç”³è¯· www.example.com åŸŸåçš„ SSL è¯ä¹¦ï¼›
2. æŠŠ DNS éªŒè¯åŸŸåçš„è®°å½•æ·»åŠ åˆ° Cloudfare çš„ DNS ä¸­ï¼›

![image.png](https://cdn.nlark.com/yuque/0/2022/png/126032/1649396905153-c2950201-1029-48cb-b7b8-c97c31f85a9d.png#averageHue=%23e1e8cb&clientId=u5ab78f5d-c256-4&from=paste&height=605&id=ua5eca405&originHeight=605&originWidth=1117&originalType=binary&ratio=1&rotation=0&showTitle=false&size=61056&status=done&style=none&taskId=u6886d9d8-e90d-47be-bcdf-d311e3dc150&title=&width=1117)
![image.png](https://cdn.nlark.com/yuque/0/2022/png/126032/1649396993249-003fd4d3-11b1-41a7-ac02-389af190353c.png#averageHue=%23e8e1af&clientId=u5ab78f5d-c256-4&from=paste&height=738&id=u953fe6ed&originHeight=738&originWidth=1491&originalType=binary&ratio=1&rotation=0&showTitle=false&size=93151&status=done&style=none&taskId=ub5e78dca-2d78-4ebe-8509-a58040fcd97&title=&width=1491)
![image.png](https://cdn.nlark.com/yuque/0/2022/png/126032/1649397071292-110075df-b035-4030-9479-7a2cbec4eaaa.png#averageHue=%23f9f9f8&clientId=u5ab78f5d-c256-4&from=paste&height=376&id=u68431020&originHeight=376&originWidth=1069&originalType=binary&ratio=1&rotation=0&showTitle=false&size=25848&status=done&style=none&taskId=u1736235a-217f-4b11-a212-c6540c9ef25&title=&width=1069)
**æ³¨æ„ï¼š**
![image.png](https://cdn.nlark.com/yuque/0/2022/png/126032/1649397852133-b2b43018-a517-43f5-8eb7-167316f178fc.png#averageHue=%23f7f6f6&clientId=u5ab78f5d-c256-4&from=paste&height=215&id=uebf3a76f&originHeight=215&originWidth=745&originalType=binary&ratio=1&rotation=0&showTitle=false&size=24412&status=done&style=stroke&taskId=u9d1c0e09-6cf9-4b1a-89c5-bee869c8660&title=&width=745)

# å‚è€ƒèµ„æ–™

1. [nginx å®ç°ä¸¤ä¸ªåŸŸåä¹‹é—´è·³è½¬é…ç½® - SegmentFault æ€å¦](https://segmentfault.com/q/1010000015157572)
2. [æ™ºèƒ½äº‘è§£æ DNS - é€šè¿‡ Nginx å®ç° URL è½¬å‘ | ç™¾åº¦æ™ºèƒ½äº‘æ–‡æ¡£](https://cloud.baidu.com/doc/DNS/s/ukq4w1pji)
3. [SEO çš„ 301 é‡å®šå‘ï¼šä½ éœ€è¦çŸ¥é“çš„ä¸€åˆ‡](https://ahrefs.com/blog/zh/301-redirects/)
